(window.webpackJsonp=window.webpackJsonp||[]).push([[74,22,23],{384:function(e,t,n){"use strict";n.r(t);var r={},o=n(20),component=Object(o.a)(r,(function(){var e=this;return(0,e._self._c)("div",{staticClass:"round drop-shadow p:16|48 bg:white cursor:pointer",on:{click:function(t){return e.$emit("click")}}},[e._t("default")],2)}),[],!1,null,null,null);t.default=component.exports},391:function(e,t,n){"use strict";n.r(t);n(15),n(51);var r=n(3),o=(n(26),n(107),n(11),n(24),n(23),n(394),n(175),n(174),{data:function(){return{response:null}},computed:{hasError:function(){return this.$route.query.payment_error&&this.$route.query.payment_error.match(/^[A-Z]\d{4}$/)},oenCCPaymentSuccess:function(){return this.$route.query.oen_success}},methods:{receiveResponse:function(data){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!data){t.next=5;break}return e.$set(e,"response",data),t.next=4,e.$nextTick();case 4:"refresh"==data.payment_type?window.location.reload():"redirect_to_newebpay"==data.payment_type?e.$refs.newebpay_form.submit():"redirect"!=data.payment_type&&"need_manual_intervention"!=data.payment_type||((n=new URL(data.payment_info.redirect_url)).origin==window.location.origin?data.payment_info.redirect_url==location.href?window.location.reload():e.$router.push(e.localePath(n.pathname+n.search)):location.href=n);case 5:case"end":return t.stop()}}),t)})))()}}}),c=n(20),component=Object(c.a)(o,(function(){var e=this,t=e._self._c;return t("div",[e.response&&"redirect_to_newebpay"==e.response.payment_type?t("form",{ref:"newebpay_form",staticClass:"display:none",attrs:{method:"POST",action:e.response.payment_info.submit_url}},[t("input",{attrs:{name:"MerchantID"},domProps:{value:e.response.payment_info.merchant_id}}),e._v(" "),t("input",{attrs:{name:"Version"},domProps:{value:e.response.payment_info.version}}),e._v(" "),t("input",{attrs:{name:"TradeInfo"},domProps:{value:e.response.payment_info.trade_info}}),e._v(" "),t("input",{attrs:{name:"TradeSha"},domProps:{value:e.response.payment_info.hash}})]):e._e(),e._v(" "),e.hasError?t("div",{staticClass:"pt:32 font-size:1.4rem"},[e._v("\n    "+e._s(e.$t("payment.errors.failed").replace("{ERROR}",e.$t("payment.enums.oenErrorCodes."+e.$route.query.payment_error)))+"\n  ")]):e._e(),e._v(" "),e.oenCCPaymentSuccess?t("div",{staticClass:"pt:32 font-size:1.4rem"},[e._v("\n    "+e._s(e.$t("payment.messages.oenSuccess"))+"\n  ")]):e._e()])}),[],!1,null,null,null);t.default=component.exports},527:function(e,t,n){"use strict";n.r(t);n(15),n(51);var r=n(3),o=(n(50),n(45),n(26),n(71)),c=n(72),d=n.n(c),l=n(137),_=n.n(l),m={data:function(){return{COLORS:_.a,config:d.a.getConfig(),isMaintenancing:d.a.isMaintenancing(),isOpened:d.a.isDinnerTicketPurchaseOpened(),openDatetimeRange:d.a.getDinnerTicketPurchaseOpenDatetimeRange(),isTooYoung:null,loading:!1,registrationStatus:null,dinnerTicketPurchaseStatus:null,totalTickets:null,pendingTickets:null,unpaidPurchase:null,unpaidOrder:null,paymentInfo:null}},mounted:function(){this.getRegistrationStatus(),this.getDinnerTicketPurchaseStatus(),this.$store.commit("app/setTitle",this.$t("dinnerTicketPurchase.itemName"))},methods:{getRegistrationStatus:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$axios.get("/api/registration").then(function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.registrationStatus=n.data;case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){o.a.showRequestError(e)}));case 3:e.loading=!1;case 4:case"end":return t.stop()}}),t)})))()},getDinnerTicketPurchaseStatus:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$axios.get("/api/dinnerTicketPurchase").then((function(t){e.dinnerTicketPurchaseStatus=t.data,e.dinnerTicketPurchaseStatus.dinner_ticket_purchases.map((function(t){e.totalTickets||(e.totalTickets=0),e.totalTickets+=t.dinner_ticket_purchase_quantity,["1","3","5"].includes(t.dinner_ticket_purchase_status)&&(e.pendingTickets||(e.pendingTickets=0),e.pendingTickets+=t.dinner_ticket_purchase_quantity,e.unpaidPurchase=t)})),e.unpaidPurchase&&e.dinnerTicketPurchaseStatus.orders.map((function(t){t.order_token==e.unpaidPurchase.order_token&&(e.unpaidOrder=t)}))})).catch((function(e){o.a.showRequestError(e)}));case 3:e.loading=!1;case 4:case"end":return t.stop()}}),t)})))()},pay:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$axios.get("/api/dinnerTicketPurchase/payment").then((function(t){e.paymentInfo=t.data.payment_info,o.a.showSnackbar({message:e.$t(t.data.code),colorType:"positive"}),e.$refs.paymentGateway.receiveResponse(t.data)})).catch((function(t){o.a.showRequestError(t),e.loading=!1}));case 3:case"end":return t.stop()}}),t)})))()}}},h=m,f=n(20),component=Object(f.a)(h,(function(){var e=this,t=e._self._c;return t("div",[t("Loading",{attrs:{value:e.loading}}),e._v(" "),e.registrationStatus&&e.registrationStatus.registration&&e.registrationStatus.registration.attendee_no?t("div",[e.unpaidPurchase?t("div",[1==e.unpaidPurchase.dinner_ticket_purchase_status?t("div",{staticClass:"round border drop-shadow bg:white p:32|16 flex flex-center flex-direction:column mb:32"},[t("div",{staticClass:"font-size:2rem font-weight:bold",style:{color:e.COLORS.negative.background}},[e._v("\n          "+e._s(e.$t("payment.enums.paymentStatus.unpaid"))+"\n        ")]),e._v(" "),e.isMaintenancing?t("RoundButton",{staticClass:"mt:16 border"},[e._v("\n          "+e._s(e.$t("common.errors.maintenancing"))+"\n        ")]):t("RoundButton",{staticClass:"mt:16 border",on:{click:e.pay}},[e._v("\n          "+e._s(e.$t("payment.actions.payNow"))+"\n        ")]),e._v(" "),t("PaymentGateway",{ref:"paymentGateway"})],1):e._e(),e._v(" "),3==e.unpaidPurchase.dinner_ticket_purchase_status?t("div",{staticClass:"round border drop-shadow bg:white p:32|16 flex flex-center flex-direction:column mb:32"},[t("div",{staticClass:"font-size:2rem font-weight:bold",style:{color:e.COLORS.primary.background}},[e._v("\n          "+e._s(e.$t("payment.enums.paymentStatus.needManualIntervention"))+"\n        ")])]):e._e(),e._v(" "),5==e.unpaidPurchase.dinner_ticket_purchase_status?t("div",{staticClass:"round border drop-shadow bg:white p:32|16 flex flex-center flex-direction:column mb:32"},[t("div",{staticClass:"font-size:2rem font-weight:bold",style:{color:e.COLORS.negative.background}},[e._v("\n          "+e._s(e.$t("payment.enums.paymentStatus.paymentInfoReceived"))+"\n        ")]),e._v(" "),t("div",{staticClass:"mt:16 color:gray font-size:1.2rem"},[e._v("\n          "+e._s(e.$t("payment.messages.paymentInfo"))+"\n        ")]),e._v(" "),t("div",{staticClass:"mt:16 color:gray font-size:1.2rem font-weight:bold"},[e._v("\n          "+e._s(e.unpaidOrder?e.unpaidOrder.order_payment_info:"")+"\n        ")]),e._v(" "),t("div",{staticClass:"mt:16 color:gray font-size:1.2rem font-weight:bold"},[e._v("\n          "+e._s(e.$t("dinnerTicketPurchase.fields.dinnerTicketPurchaseTotalAmount"))+"\n          :\n          "+e._s(e.unpaidPurchase.dinner_ticket_purchase_total_amount)+"\n          /\n          "+e._s(e.$t("payment.fields.orderExpireDatetime"))+"\n          :\n          "+e._s(e.unpaidOrder?new Date(e.unpaidOrder.order_expire_datetime).toLocaleString():"")+"\n        ")])]):e._e()]):e._e(),e._v(" "),e.dinnerTicketPurchaseStatus?t("div",[e.dinnerTicketPurchaseStatus.dinner_ticket_purchases?t("div",{staticClass:"p:96|32 bg:white flex flex-center font-size:1.4rem round drop-shadow border",staticStyle:{"flex-direction":"column"}},[e.dinnerTicketPurchaseStatus.dinner_ticket_purchases.length>0?t("div",[e._v("\n          "+e._s(e.$t("dinnerTicketPurchase.messages.youPurchasedTickets").replace(":tickets",e.totalTickets))),e.pendingTickets?t("span",[e._v("Â "+e._s(e.$t("dinnerTicketPurchase.messages.ticketsPendingPayment").replace(":tickets",e.pendingTickets)))]):e._e()]):t("div",[e._v("\n          "+e._s(e.$t("dinnerTicketPurchase.messages.notPurchasedYet"))+"\n        ")]),e._v(" "),t("div",{staticClass:"mt:16 font-size:1rem"},[e._v(e._s(e.$t("dinnerTicketPurchase.messages.puckupTicketsWhenCheckin")))])]):e._e(),e._v(" "),e.dinnerTicketPurchaseStatus.can_purchase?t("div",{staticClass:"mt:32 flex flex-center"},[!e.isOpened||e.isMaintenancing||e.unpaidPurchase?e.isMaintenancing?t("RoundButton",[e._v("\n          "+e._s(e.$t("common.errors.maintenancing"))+"\n        ")]):e.unpaidPurchase?e._e():t("RoundButton",[e._v("\n          "+e._s(e.$t("common.errors.ended"))+"\n        ")]):t("nuxt-link",{attrs:{to:e.localePath("/dinnerTicketPurchase/tos")}},[t("RoundButton",[e._v(e._s(e.$t("dinnerTicketPurchase.actions.buyNow")))])],1)],1):e._e()]):e._e()]):t("div",[t("div",{staticClass:"p:96|32 bg:white flex flex-center font-size:1.4rem round drop-shadow border"},[e._v("\n      "+e._s(e.$t("dinnerTicketPurchase.messages.notRegistered"))+"\n    ")])])],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Loading:n(172).default,RoundButton:n(384).default,PaymentGateway:n(391).default})}}]);