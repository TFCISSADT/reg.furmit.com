(window.webpackJsonp=window.webpackJsonp||[]).push([[36,7],{374:function(t,e,r){"use strict";r.r(e);var n=r(137),o=r.n(n),c={props:{type:{type:String,default:"primary"},disabled:{type:Boolean,default:!1}},computed:{computedStyle:function(){return{background:o.a[this.type].background,color:o.a[this.type].color}}},mounted:function(){this.button=this.$refs.button}},d=r(20),component=Object(d.a)(c,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"position:relative"},[e("button",{ref:"button",staticClass:"b:0 p:8|16 w:100% border-radius:4 cursor:pointer transform:translateY(-2):hover transition:0.2s",style:t.computedStyle,on:{click:function(e){return e.preventDefault(),t.$emit("click")}}},[t._t("default")],2),t._v(" "),t.disabled?e("div",{staticClass:"position:absolute top:0 left:0 w:100% h:100% background:rgba(0,0,0,0.4)"}):t._e()])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Button:r(374).default})},419:function(t,e,r){var content=r(462);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(62).default)("cb888a86",content,!0,{sourceMap:!1})},461:function(t,e,r){"use strict";r(419)},462:function(t,e,r){var n=r(61)(!1);n.push([t.i,"table.furstarsRundown{border-collapse:collapse}table.furstarsRundown td{padding:4px 8px;border-bottom:1px solid #000}table.furstarsRundown td:first-child,td:last-child{padding:4px 0}",""]),t.exports=n},554:function(t,e,r){"use strict";r.r(e);r(45);var n=r(3),o=(r(26),r(50),r(71)),c={layout:"admin",components:{},data:function(){var t={tutorial:"規則說明",lobby:"主畫面",showcase:"開始演出",showcase_red:"紅隊演出",showcase_black:"黑隊演出",voting:"回合投票",result:"回合投票結果",midresult:"上半場投票結果",transition:"過場畫面",finalresult:"投票結果一覽",prize:"冠軍畫面",good:"贊"};return{loading:!1,scenes:t,furstarsTeams:{},furstarsRundownSteps:{},dataLoaded:{},furstarsScenes:t}},mounted:function(){this.getFurstarsTeams()},watch:{},methods:{getFurstarsTeams:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$axios.get("/api/admin/furstars/teams").then((function(e){t.furstarsTeams={},e.data.furstarsTeams.map((function(e){var r=e.mit_furstars_team_id;t.furstarsTeams[r]=e})),t.dataLoaded.furstarsTeams=!0,t.dataLoaded.furstarsTeams&&t.getFurstarsRundownSteps()})).catch((function(t){o.a.showRequestError(t)}));case 3:t.loading=!1;case 4:case"end":return e.stop()}}),e)})))()},getFurstarsRundownSteps:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var output;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,output=[],e.next=4,t.$axios.get("/api/admin/furstars/rundownSteps").then((function(e){var r={furstarsTeams:t.furstarsTeams};e.data.furstarsRundownSteps.map((function(t){["showcase"].includes(t.mit_furstars_rundown_step_scene)||(t.z=r,output.push(t))})),t.furstarsRundownSteps=output})).catch((function(t){o.a.showRequestError(t)}));case 4:t.loading=!1;case 5:case"end":return e.stop()}}),e)})))()},goToStep:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.loading=!0,e,r.next=4,e.$axios.post("/api/admin/furstars/status/go/".concat(t)).then((function(t){e.getFurstarsRundownSteps()})).catch((function(t){o.a.showRequestError(t)}));case 4:e.loading=!1;case 5:case"end":return r.stop()}}),r)})))()},stopVotes:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.loading=!0,e,r.next=4,e.$axios.post("/api/admin/furstars/status/go/".concat(t,"/stop")).then((function(t){e.getFurstarsRundownSteps()})).catch((function(t){o.a.showRequestError(t)}));case 4:e.loading=!1;case 5:case"end":return r.stop()}}),r)})))()},settlement:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(confirm("每個階段只能結算一次，確認要進行結算並派發獎勵嗎？")){r.next=2;break}return r.abrupt("return");case 2:return e.loading=!0,e,r.next=6,e.$axios.post("/api/admin/furstars/status/go/".concat(t,"/settlement")).then((function(t){alert("已完成結算並派發獎勵"),e.getFurstarsRundownSteps()})).catch((function(t){o.a.showRequestError(t)}));case 6:e.loading=!1;case 7:case"end":return r.stop()}}),r)})))()}}},d=(r(461),r(20)),component=Object(d.a)(c,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"p:16 overflow:auto"},[e("Loading",{attrs:{value:t.loading}}),t._v(" "),e("div",{staticClass:"font-size:2rem"},[t._v("FurStars 階段管理")]),t._v(" "),e("div",{staticClass:"font-size:1.5rem mt:16 mb:8"},[t._v("階段清單")]),t._v(" "),e("table",{staticClass:"furstarsRundown"},[e("tbody",t._l(t.furstarsRundownSteps,(function(r){return e("tr",[e("td",{staticClass:"action",staticStyle:{"text-align":"right"}},[r.mit_furstars_rundown_step_is_current?e("Button",{attrs:{type:"negative"}},[t._v("進行中")]):e("Button",{attrs:{type:"primary"},on:{click:function(e){return t.goToStep(r.mit_furstars_rundown_step_id)}}},[t._v("開始")])],1),t._v(" "),e("td",[["showcase","showcase_red","showcase_black","voting","result"].includes(r.mit_furstars_rundown_step_scene)?e("span",[t._v("#"+t._s(parseInt(r.mit_furstars_rundown_step_stage/10)))]):t._e()]),t._v(" "),e("td",[t._v(t._s(t.scenes[r.mit_furstars_rundown_step_scene]))]),t._v(" "),e("td",[["showcase","showcase_red","voting","result"].includes(r.mit_furstars_rundown_step_scene)?e("span",{staticStyle:{"background-color":"red",color:"white",padding:"4px 8px","border-radius":"3px"}},[t._v(t._s(t.furstarsTeams[r.mit_furstars_rundown_step_red_team_id].mit_furstars_team_name))]):t._e()]),t._v(" "),e("td",[["showcase","showcase_black","voting","result"].includes(r.mit_furstars_rundown_step_scene)?e("span",{staticStyle:{"background-color":"black",color:"white",padding:"4px 8px","border-radius":"3px"}},[t._v(t._s(t.furstarsTeams[r.mit_furstars_rundown_step_black_team_id].mit_furstars_team_name))]):t._e()]),t._v(" "),e("td",{staticClass:"action"},[["voting"].includes(r.mit_furstars_rundown_step_scene)&&r.mit_furstars_rundown_step_is_current?e("Button",{attrs:{type:"primary"},on:{click:function(e){return t.stopVotes(r.mit_furstars_rundown_step_id)}}},[t._v("關閉投票")]):t._e(),t._v(" "),["result","prize"].includes(r.mit_furstars_rundown_step_scene)&&r.mit_furstars_rundown_step_is_current?e("Button",{attrs:{type:"primary"},on:{click:function(e){return t.settlement(r.mit_furstars_rundown_step_id)}}},[t._v("結算")]):t._e()],1)])})),0)])],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Loading:r(172).default,Button:r(374).default})}}]);